!function(a,b){"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports?module.exports=b():a.lscache=b()}(this,function(){function a(){var a="__lscachetest__",c=a;if(void 0!==p)return p;try{if(!localStorage)return!1}catch(d){return!1}try{i(a,c),j(a),p=!0}catch(e){p=b(e)&&localStorage.length?!0:!1}return p}function b(a){return a&&"QUOTA_EXCEEDED_ERR"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name||"QuotaExceededError"===a.name?!0:!1}function c(){return void 0===q&&(q=null!=window.JSON),q}function d(a){return a.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")}function e(a){return a+s}function f(){return Math.floor((new Date).getTime()/u)}function g(a){return localStorage.getItem(r+w+a)}function h(a,c){try{i(a,c)}catch(d){if(!b(d))return void o("Could not add item with key '"+a+"'",d);l((r+w+a).length+(c||"").length);try{i(a,c)}catch(d){return void o("Could not add item with key '"+a+"', perhaps it's too big?",d)}}}function i(a,b){localStorage.removeItem(r+w+a),localStorage.setItem(r+w+a,b)}function j(a){localStorage.removeItem(r+w+a)}function k(a){for(var b=new RegExp("^"+r+d(w)+"(.*)"),c=localStorage.length-1;c>=0;--c){var f=localStorage.key(c);f=f&&f.match(b),f=f&&f[1],f&&f.indexOf(s)<0&&a(f,e(f))}}function l(a){var b,c=[];k(function(a,b){var d=g(b);d=d?parseInt(d,t):v,c.push({key:a,size:a.length+(g(a)||"").length,expiration:d})}),c.sort(function(a,b){return b.expiration-a.expiration});for(var d=0,e=[];c.length&&a>d;)b=c.pop(),m(b.key),e.push(b.key),d+=b.size;return e.length&&o("Cache is full. Approx "+a+" bytes needed. Removed "+e.length+" keys (~ "+d+" bytes) to make space."),d}function m(a){var b=e(a);j(a),j(b)}function n(a){var b=e(a),c=g(b);if(c){var d=parseInt(c,t);if(f()>=d)return j(a),j(b),!0}}function o(a,b){x&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+a),b&&window.console.warn("lscache - The error was: "+b.message))}var p,q,r="lscache-",s="-cacheexpiration",t=10,u=6e4,v=Math.floor(864e13/u),w="",x=!1,y={set:function(b,d,g){if(a()){if("string"!=typeof d){if(!c())return;try{d=JSON.stringify(d)}catch(i){return}}h(b,d),g?h(e(b),(f()+g).toString(t)):j(e(b))}},get:function(b){if(!a())return null;if(n(b))return null;var d=g(b);if(!d||!c())return d;try{return JSON.parse(d)}catch(e){return d}},remove:function(b){a()&&m(b)},supported:function(){return a()},flush:function(){a()&&k(function(a){m(a)})},flushExpired:function(){a()&&k(function(a){n(a)})},setBucket:function(a){w=a},resetBucket:function(){w=""},enableWarnings:function(a){x=a}};return y});